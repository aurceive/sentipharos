from datetime import datetime
from beanie import Document, Indexed
from pydantic import BaseModel, Field
from typing import Annotated, Optional
from .channel import Channel

class VideoInfo(BaseModel):
  info_date: datetime = datetime.now()
  published_at: Annotated[str, Indexed()]
  channel: Channel
  title: str
  description: str
  thumbnail_url: str
  channel_title: str
  tags: list[str]
  category_id: str
  view_count: int
  like_count: int
  favorite_count: int
  comment_count: int

class Video(Document):
  video_id: Annotated[str, Indexed(unique=True)]
  info: Optional[VideoInfo] = None
  subscription: bool = False
  first_comment_fetched: bool = False


# video_example = {'kind': 'youtube#video',
#  'etag': 'wqlE8DZCrlwb5sPOIvtV6O8Iyt8',
#  'id': 'fPr3vbxnNew',
#  'snippet': {'publishedAt': '2024-10-29T11:30:20Z',
#   'channelId': 'UC7Elc-kLydl-NAV4g204pDQ',
#   'title': '–§–∏—à–º–∞–Ω –ø—Ä–æ –æ—Ç–≤–µ—Ç –§–ë–ö –ö–∞—Ü—É',
#   'description': '¬´–ï—Å–ª–∏ –ú–∞–∫—Å–∏–º –ö–∞—Ü –∑–∞–±–æ—Ç–∏–ª—Å—è –æ —Å–≤–æ–µ–π —Ä–µ–ø—É—Ç–∞—Ü–∏–∏, —Ç–æ –æ–Ω–∞ –ø–æ—Ç–µ—Ä–ø–µ–ª–∞ –¥–æ–≤–æ–ª—å–Ω–æ —Å–µ—Ä—å—ë–∑–Ω—ã–π —É—â–µ—Ä–±¬ª. \n\n–ì–æ—Å—Ç—å: \n–ú–∏—Ö–∞–∏–ª –§–∏—à–º–∞–Ω ‚Äî https://www.instagram.com/fishmanmish \n\n–í–µ–¥—É—â–∞—è: \n–ù–∏–Ω–æ –†–æ—Å–µ–±–∞—à–≤–∏–ª–∏ ‚Äî @ninorosebashvili  \n\n–°–º–æ—Ç—Ä–∏—Ç–µ –ø–æ–ª–Ω—ã–π –≤—ã–ø—É—Å–∫ –ø–æ —Å—Å—ã–ª–∫–µ: https://youtube.com/live/zHIAXdIqxKc \n\nüí≥ –°—Ç–∞—Ç—å –ø–∞—Ç—Ä–æ–Ω–æ–º –ª—é–±–∏–º–æ–π –ø–µ—Ä–µ–¥–∞—á–∏: https://www.patreon.com/Popularpolitics \nüí∞ –°–ø–æ–Ω—Å–∏—Ä–æ–≤–∞—Ç—å –∫–∞–Ω–∞–ª –Ω–∞ YouTube: https://www.youtube.com/c/Popularpolitics/join \nüí∏ –ü–æ–¥–¥–µ—Ä–∂–∞—Ç—å –Ω–∞—Å –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç–æ–π: https://donate.fbk.info/#crypto \nüí∂ –í—Å–µ —Å–ø–æ—Å–æ–±—ã –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ: https://donate.fbk.info \n\nüìñ –ó–∞–∫–∞–∑–∞—Ç—å –∫–Ω–∏–≥—É –ê–ª–µ–∫—Å–µ—è –ù–∞–≤–∞–ª—å–Ω–æ–≥–æ ¬´–ü–∞—Ç—Ä–∏–æ—Ç¬ª: https://patriot.navalny.com \n\n–í–∞–∂–Ω—ã–µ —Å—Å—ã–ª–∫–∏: \nüîπ –û—Ñ–æ—Ä–º–∏—Ç–µ –ø–æ–∂–µ—Ä—Ç–≤–æ–≤–∞–Ω–∏–µ –≤ –ø–æ–¥–¥–µ—Ä–∂–∫—É –ø–æ–ª–∏—Ç–∑–∞–∫–ª—é—á–µ–Ω–Ω—ã—Ö: https://june12.io \nüîπ –ë–æ—Ç ¬´–ù–∞–ø–∏—à–∏ –ø–æ–ª–∏—Ç–∑–µ–∫—É¬ª: https://t.me/politzekam_bot \nüîπ –®—Ç–∞–±—ã –ù–∞–≤–∞–ª—å–Ω–æ–≥–æ. –ó–∞—â–∏—â–µ–Ω–Ω–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è –∞–∫—Ç–∏–≤–∏—Å—Ç–æ–≤ –≤ –†–æ—Å—Å–∏–∏: https://shtab.navalny.com \nüîπ –ù–∞—à –ø—Ä–æ–µ–∫—Ç ¬´–¶–µ–Ω—ã —Å–µ–≥–æ–¥–Ω—è¬ª. –û—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º —Ä–æ—Å—Ç —Ü–µ–Ω –≤ –º–∞–≥–∞–∑–∏–Ω–∞—Ö —Å –Ω–∞—á–∞–ª–∞ –≤–æ–π–Ω—ã: https://pricing.day \nüîπ –ë–æ—Ç-–ø—Ä–µ–¥–ª–æ–∂–∫–∞ –∫–æ–º–∞–Ω–¥—ã –ù–∞–≤–∞–ª—å–Ω–æ–≥–æ: https://t.me/teamnavalny_bot \n\n–ü–æ–¥–¥–µ—Ä–∂–∏—Ç–µ –Ω–∞—à—É —Ä–∞–±–æ—Ç—É! \nüî∏ –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É ¬´–°–ø–∞—Å–∏–±–æ¬ª –ø–æ–¥ —ç—Ç–∏–º –≤–∏–¥–µ–æ, —á—Ç–æ–±—ã –ø–æ–¥–¥–µ—Ä–∂–∞—Ç—å –∫–æ–º–∞–Ω–¥—É –∑–∞ –∫–∞–¥—Ä–æ–º! \nüî∏ –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–π—Ç–µ –®—Ç–∞–±—ã –ù–∞–≤–∞–ª—å–Ω–æ–≥–æ: https://www.patreon.com/shtab_navalny \nüî∏ –ü–æ–∫—É–ø–∞–π—Ç–µ –º–µ—Ä—á –ö–æ–º–∞–Ω–¥—ã –ù–∞–≤–∞–ª—å–Ω–æ–≥–æ: https://navalny.shop \n\n–ü–æ–¥–ø–∏—Å—ã–≤–∞–π—Ç–µ—Å—å, —á—Ç–æ–±—ã —É–∑–Ω–∞–≤–∞—Ç—å –æ –≥–ª–∞–≤–Ω–æ–º —Ä–∞–Ω—å—à–µ –¥—Ä—É–≥–∏—Ö: \n‚ûñ –¢–µ–ª–µ–≥—Ä–∞–º: https://t.me/politica_media \n‚ûñ –ò–Ω—Å—Ç–∞–≥—Ä–∞–º: https://instagram.com/politica_media \n‚ûñ –¢–≤–∏—Ç—Ç–µ—Ä (X): https://twitter.com/politica_media \n‚ûñ –ü–æ–º–æ—â—å —é—Ä–∏—Å—Ç–æ–≤ –∏ –æ—Ç–≤–µ—Ç—ã –Ω–∞ –≥–ª–∞–≤–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã –æ –º–æ–±–∏–ª–∏–∑–∞—Ü–∏–∏ –≤ —Ç–µ–ª–µ–≥—Ä–∞–º-–∫–∞–Ω–∞–ª–µ: https://t.me/mobilizationnews \n‚ûñ –ù–æ–≤–æ—Å—Ç–∏ –±–µ–∑ —Ü–µ–Ω–∑—É—Ä—ã: —Ç–µ–ª–µ–≥—Ä–∞–º-–∫–∞–Ω–∞–ª ¬´–°–∏—Ä–µ–Ω–∞¬ª: https://t.me/news_sirena \n‚ûñ YouTube-–∫–∞–Ω–∞–ª ¬´–°–∞–º–æ–µ –≤–∞–∂–Ω–æ–µ¬ª —Å –ò–≤–∞–Ω–æ–º –ñ–¥–∞–Ω–æ–≤—ã–º, –≥–¥–µ –≤–∞—Å –∂–¥—ë—Ç –ª—É—á—à–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ —Å–æ–±—ã—Ç–∏–π –Ω–µ–¥–µ–ª–∏: https://www.youtube.com/@samoe_vazhnoe \n\n#–ø–æ–ø—É–ª—è—Ä–Ω–∞—è–ø–æ–ª–∏—Ç–∏–∫–∞ #–∫–∞—Ü #—Ñ–∏—à–º–∞–Ω',
#   'thumbnails': {'default': {'url': 'https://i.ytimg.com/vi/fPr3vbxnNew/default.jpg',
#     'width': 120,
#     'height': 90},
#    'medium': {'url': 'https://i.ytimg.com/vi/fPr3vbxnNew/mqdefault.jpg',
#     'width': 320,
#     'height': 180},
#    'high': {'url': 'https://i.ytimg.com/vi/fPr3vbxnNew/hqdefault.jpg',
#     'width': 480,
#     'height': 360},
#    'standard': {'url': 'https://i.ytimg.com/vi/fPr3vbxnNew/sddefault.jpg',
#     'width': 640,
#     'height': 480},
#    'maxres': {'url': 'https://i.ytimg.com/vi/fPr3vbxnNew/maxresdefault.jpg',
#     'width': 1280,
#     'height': 720}},
#   'channelTitle': '–ü–æ–ø—É–ª—è—Ä–Ω–∞—è –ø–æ–ª–∏—Ç–∏–∫–∞',
#   'tags': ['–≤–æ–π–Ω–∞',
#    '—Å–ø–µ—Ü–æ–ø–µ—Ä–∞—Ü–∏—è',
#    '–ø–æ–ø—É–ª—è—Ä–Ω–∞—è –ø–æ–ª–∏—Ç–∏–∫–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–µ',
#    '–§–∏—à–º–∞–Ω',
#    '–ú–∏—Ö–∞–∏–ª –§–∏—à–º–∞–Ω',
#    '–§–∏—à–º–∞–Ω –∏–Ω—Ç–µ—Ä–≤—å—é',
#    '–§–∏—à–º–∞–Ω –ø—Ä–æ –ö–∞—Ü–∞',
#    '–ò–Ω—Ç–µ—Ä–≤—å—é —Å –§–∏—à–º–∞–Ω–æ–º',
#    '–ò–Ω—Ç–µ—Ä–≤—å—é —Å –ú–∏—Ö–∞–∏–ª–æ–º –§–∏—à–º–∞–Ω–æ–º',
#    '–û—Ç–≤–µ—Ç —Ñ–±–∫',
#    '–ö–∞—Ü',
#    '–ö–∞–∑–Ω–∞—á–µ–π',
#    '–§–∏—à–º–∞–Ω –ö–∞—Ü',
#    '–§–∏—à–º–∞–Ω –ø—Ä–æ –ú–∞–∫—Å–∏–º–∞ –ö–∞—Ü–∞',
#    '–û—Ç–≤–µ—Ç –ö–∞—Ü—É',
#    '–§–∏—à–º–∞–Ω –ø—Ä–æ –æ—Ç–≤–µ—Ç –ö–∞—Ü—É',
#    '–§–∏—à–º–∞–Ω –ø—Ä–æ —Ä–∞—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ',
#    '–§–∏—à–º–∞–Ω –ö–∞–∑–Ω–∞—á–µ–π',
#    '–†–µ–ø—É—Ç–∞—Ü–∏—è –ö–∞—Ü–∞',
#    '–ú–∏—Ö–∞–∏–ª –§–∏—à–º–∞–Ω –ø—Ä–æ –ú–∞–∫—Å–∏–º–∞ –ö–∞—Ü–∞',
#    '–§–∏—à–º–∞–Ω –ø—Ä–æ —Ñ–∏–ª—å–º',
#    '–§–∏—à–º–∞–Ω –§–ë–ö',
#    '–ù–∞–≤–∞–ª—å–Ω—ã–π',
#    '–ù–∞–≤–∞–ª—å–Ω–∞—è',
#    '–§–ë–ö',
#    '–ö–æ–º–∞–Ω–¥–∞ –ù–∞–≤–∞–ª—å–Ω–æ–≥–æ',
#    '–ü–æ–ø—É–ª—è—Ä–Ω–∞—è –ø–æ–ª–∏—Ç–∏–∫–∞',
#    '–ü–æ–ø—É–ª—è—Ä–Ω–∞—è –ø–æ–ª–∏—Ç–∏–∫–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–µ'],
#   'categoryId': '25',
#   'liveBroadcastContent': 'none',
#   'defaultLanguage': 'ru',
#   'localized': {'title': '–§–∏—à–º–∞–Ω –ø—Ä–æ –æ—Ç–≤–µ—Ç –§–ë–ö –ö–∞—Ü—É',
#    'description': '¬´–ï—Å–ª–∏ –ú–∞–∫—Å–∏–º –ö–∞—Ü –∑–∞–±–æ—Ç–∏–ª—Å—è –æ —Å–≤–æ–µ–π —Ä–µ–ø—É—Ç–∞—Ü–∏–∏, —Ç–æ –æ–Ω–∞ –ø–æ—Ç–µ—Ä–ø–µ–ª–∞ –¥–æ–≤–æ–ª—å–Ω–æ —Å–µ—Ä—å—ë–∑–Ω—ã–π —É—â–µ—Ä–±¬ª. \n\n–ì–æ—Å—Ç—å: \n–ú–∏—Ö–∞–∏–ª –§–∏—à–º–∞–Ω ‚Äî https://www.instagram.com/fishmanmish \n\n–í–µ–¥—É—â–∞—è: \n–ù–∏–Ω–æ –†–æ—Å–µ–±–∞—à–≤–∏–ª–∏ ‚Äî @ninorosebashvili  \n\n–°–º–æ—Ç—Ä–∏—Ç–µ –ø–æ–ª–Ω—ã–π –≤—ã–ø—É—Å–∫ –ø–æ —Å—Å—ã–ª–∫–µ: https://youtube.com/live/zHIAXdIqxKc \n\nüí≥ –°—Ç–∞—Ç—å –ø–∞—Ç—Ä–æ–Ω–æ–º –ª—é–±–∏–º–æ–π –ø–µ—Ä–µ–¥–∞—á–∏: https://www.patreon.com/Popularpolitics \nüí∞ –°–ø–æ–Ω—Å–∏—Ä–æ–≤–∞—Ç—å –∫–∞–Ω–∞–ª –Ω–∞ YouTube: https://www.youtube.com/c/Popularpolitics/join \nüí∏ –ü–æ–¥–¥–µ—Ä–∂–∞—Ç—å –Ω–∞—Å –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç–æ–π: https://donate.fbk.info/#crypto \nüí∂ –í—Å–µ —Å–ø–æ—Å–æ–±—ã –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ: https://donate.fbk.info \n\nüìñ –ó–∞–∫–∞–∑–∞—Ç—å –∫–Ω–∏–≥—É –ê–ª–µ–∫—Å–µ—è –ù–∞–≤–∞–ª—å–Ω–æ–≥–æ ¬´–ü–∞—Ç—Ä–∏–æ—Ç¬ª: https://patriot.navalny.com \n\n–í–∞–∂–Ω—ã–µ —Å—Å—ã–ª–∫–∏: \nüîπ –û—Ñ–æ—Ä–º–∏—Ç–µ –ø–æ–∂–µ—Ä—Ç–≤–æ–≤–∞–Ω–∏–µ –≤ –ø–æ–¥–¥–µ—Ä–∂–∫—É –ø–æ–ª–∏—Ç–∑–∞–∫–ª—é—á–µ–Ω–Ω—ã—Ö: https://june12.io \nüîπ –ë–æ—Ç ¬´–ù–∞–ø–∏—à–∏ –ø–æ–ª–∏—Ç–∑–µ–∫—É¬ª: https://t.me/politzekam_bot \nüîπ –®—Ç–∞–±—ã –ù–∞–≤–∞–ª—å–Ω–æ–≥–æ. –ó–∞—â–∏—â–µ–Ω–Ω–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è –∞–∫—Ç–∏–≤–∏—Å—Ç–æ–≤ –≤ –†–æ—Å—Å–∏–∏: https://shtab.navalny.com \nüîπ –ù–∞—à –ø—Ä–æ–µ–∫—Ç ¬´–¶–µ–Ω—ã —Å–µ–≥–æ–¥–Ω—è¬ª. –û—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º —Ä–æ—Å—Ç —Ü–µ–Ω –≤ –º–∞–≥–∞–∑–∏–Ω–∞—Ö —Å –Ω–∞—á–∞–ª–∞ –≤–æ–π–Ω—ã: https://pricing.day \nüîπ –ë–æ—Ç-–ø—Ä–µ–¥–ª–æ–∂–∫–∞ –∫–æ–º–∞–Ω–¥—ã –ù–∞–≤–∞–ª—å–Ω–æ–≥–æ: https://t.me/teamnavalny_bot \n\n–ü–æ–¥–¥–µ—Ä–∂–∏—Ç–µ –Ω–∞—à—É —Ä–∞–±–æ—Ç—É! \nüî∏ –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É ¬´–°–ø–∞—Å–∏–±–æ¬ª –ø–æ–¥ —ç—Ç–∏–º –≤–∏–¥–µ–æ, —á—Ç–æ–±—ã –ø–æ–¥–¥–µ—Ä–∂–∞—Ç—å –∫–æ–º–∞–Ω–¥—É –∑–∞ –∫–∞–¥—Ä–æ–º! \nüî∏ –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–π—Ç–µ –®—Ç–∞–±—ã –ù–∞–≤–∞–ª—å–Ω–æ–≥–æ: https://www.patreon.com/shtab_navalny \nüî∏ –ü–æ–∫—É–ø–∞–π—Ç–µ –º–µ—Ä—á –ö–æ–º–∞–Ω–¥—ã –ù–∞–≤–∞–ª—å–Ω–æ–≥–æ: https://navalny.shop \n\n–ü–æ–¥–ø–∏—Å—ã–≤–∞–π—Ç–µ—Å—å, —á—Ç–æ–±—ã —É–∑–Ω–∞–≤–∞—Ç—å –æ –≥–ª–∞–≤–Ω–æ–º —Ä–∞–Ω—å—à–µ –¥—Ä—É–≥–∏—Ö: \n‚ûñ –¢–µ–ª–µ–≥—Ä–∞–º: https://t.me/politica_media \n‚ûñ –ò–Ω—Å—Ç–∞–≥—Ä–∞–º: https://instagram.com/politica_media \n‚ûñ –¢–≤–∏—Ç—Ç–µ—Ä (X): https://twitter.com/politica_media \n‚ûñ –ü–æ–º–æ—â—å —é—Ä–∏—Å—Ç–æ–≤ –∏ –æ—Ç–≤–µ—Ç—ã –Ω–∞ –≥–ª–∞–≤–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã –æ –º–æ–±–∏–ª–∏–∑–∞—Ü–∏–∏ –≤ —Ç–µ–ª–µ–≥—Ä–∞–º-–∫–∞–Ω–∞–ª–µ: https://t.me/mobilizationnews \n‚ûñ –ù–æ–≤–æ—Å—Ç–∏ –±–µ–∑ —Ü–µ–Ω–∑—É—Ä—ã: —Ç–µ–ª–µ–≥—Ä–∞–º-–∫–∞–Ω–∞–ª ¬´–°–∏—Ä–µ–Ω–∞¬ª: https://t.me/news_sirena \n‚ûñ YouTube-–∫–∞–Ω–∞–ª ¬´–°–∞–º–æ–µ –≤–∞–∂–Ω–æ–µ¬ª —Å –ò–≤–∞–Ω–æ–º –ñ–¥–∞–Ω–æ–≤—ã–º, –≥–¥–µ –≤–∞—Å –∂–¥—ë—Ç –ª—É—á—à–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ —Å–æ–±—ã—Ç–∏–π –Ω–µ–¥–µ–ª–∏: https://www.youtube.com/@samoe_vazhnoe \n\n#–ø–æ–ø—É–ª—è—Ä–Ω–∞—è–ø–æ–ª–∏—Ç–∏–∫–∞ #–∫–∞—Ü #—Ñ–∏—à–º–∞–Ω'},
#   'defaultAudioLanguage': 'ru'},
#  'statistics': {'viewCount': '45880',
#   'likeCount': '1177',
#   'favoriteCount': '0',
#   'commentCount': '2118'}}